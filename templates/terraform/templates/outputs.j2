# Outputs for {{ project_name }}
# Generated by OpsArtisan

{% if enable_vpc %}
output "vpc_id" {
  description = "ID of the VPC"
  value       = {% if enable_modules and configuration_mode == 'advanced' %}module.vpc.vpc_id{% else %}aws_vpc.main.id{% endif %}
}

output "public_subnet_ids" {
  description = "IDs of public subnets"
  value       = {% if enable_ha and configuration_mode == 'advanced' %}aws_subnet.public[*].id{% else %}[aws_subnet.public.id]{% endif %}
}

output "private_subnet_ids" {
  description = "IDs of private subnets"
  value       = {% if enable_ha and configuration_mode == 'advanced' %}aws_subnet.private[*].id{% else %}[aws_subnet.private.id]{% endif %}
}
{% endif %}

{% if enable_load_balancer %}
output "load_balancer_dns" {
  description = "DNS name of the load balancer"
  value       = aws_lb.main.dns_name
}

output "load_balancer_url" {
  description = "URL of the load balancer"
  value       = "http{% if enable_ssl %}s{% endif %}://${aws_lb.main.dns_name}"
}
{% endif %}

{% if infrastructure_type == 'application' and not enable_autoscaling %}
output "instance_public_ip" {
  description = "Public IP of the EC2 instance"
  value       = aws_instance.main.public_ip
}

output "instance_id" {
  description = "ID of the EC2 instance"
  value       = aws_instance.main.id
}
{% endif %}

{% if enable_autoscaling and configuration_mode == 'advanced' %}
output "autoscaling_group_name" {
  description = "Name of the Auto Scaling Group"
  value       = aws_autoscaling_group.main.name
}
{% endif %}

{% if enable_rds %}
output "database_endpoint" {
  description = "RDS database endpoint"
  value       = aws_db_instance.main.endpoint
  sensitive   = true
}

output "database_name" {
  description = "RDS database name"
  value       = aws_db_instance.main.db_name
}

output "database_password_secret_arn" {
  description = "ARN of the secret containing database password"
  value       = aws_secretsmanager_secret.db_password.arn
}
{% endif %}

{% if enable_s3 %}
{% for bucket in s3_buckets.split(',') %}
output "s3_bucket_{{ bucket.strip() }}" {
  description = "Name of {{ bucket.strip() }} S3 bucket"
  value       = aws_s3_bucket.{{ bucket.strip() }}.id
}
{% endfor %}
{% endif %}

output "region" {
  description = "AWS region"
  value       = var.region
}

output "environment" {
  description = "Environment name"
  value       = var.environment
}
