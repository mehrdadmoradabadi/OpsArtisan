{% if enable_remote_state and configuration_mode == 'advanced' %}
# Remote state configuration
# Generated by OpsArtisan

terraform {
  backend "{{ state_backend }}" {
    {% if state_backend == 's3' %}
    bucket         = "{{ state_bucket }}"
    key            = "{{ project_name }}/{{ environment }}/terraform.tfstate"
    region         = "{{ region }}"
    {% if enable_state_locking %}
    dynamodb_table = "{{ project_name }}-terraform-locks"
    {% endif %}
    encrypt        = true
    {% elif state_backend == 'azurerm' %}
    resource_group_name  = "{{ project_name }}-terraform-state"
    storage_account_name = "{{ state_bucket }}"
    container_name       = "tfstate"
    key                  = "{{ environment }}.terraform.tfstate"
    {% elif state_backend == 'gcs' %}
    bucket = "{{ state_bucket }}"
    prefix = "{{ project_name }}/{{ environment }}"
    {% elif state_backend == 'terraform-cloud' %}
    organization = "your-org"
    workspaces {
      name = "{{ project_name }}-{{ environment }}"
    }
    {% endif %}
  }
}
{% endif %}
